<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Change Password</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body class="b2">
    <div></div>
    <div class="img-signup"></div>
    <div class="container122">
       
        <div class="form1" >
            <form action="../page/password.php" method="post" id="password-verify" onsubmit="return validatePassword();">
                <a href="../index.html" ><img src="../image/logo.png" id="sign-img1"></a>
                <h2 class="reg">Enter Your New Password</h2>
                <label for="email">Email</label>
                <br>
                <input type="text" placeholder="Email" id="Email" name="email" required>
                <br><br>
                <label for="password">New Password</label>
                <br> 
                <div class="password-container">
                    <input type="password" placeholder="Password" id="password1" name="password1" required>
                    <span class="toggle-password" onclick="togglePasswordVisibility()">
                        <i class="fas fa-eye" style="color: #0285C8;"></i> 
                    </span>
                </div>
                <div id="password-validation-1" class="password-validation"></div>
                <br>
                <label for="password">Confirm Password</label>
                <br> 
                <div class="password-container">
                    <input type="password" placeholder="Confim Password" id="password" name="password" required>
                    <span class="toggle-password" onclick="togglePasswordVisibility1()">
                        <i class="fas fa-eye" style="color: #0285C8;"></i> 
                    </span>
                </div>
                <div id="password-validation-2" class="password-validation"></div>
                <br><br>
                <button type="submit" class="butn success">Submit</button>
                <br><br>
            </form>
        </div>
    </div>
</div>
<script>
    function validatePassword() {
        const password1 = document.getElementById('password1').value;
        const password2 = document.getElementById('password').value;
        const passwordValidation1 = document.getElementById('password-validation-1');
        const passwordValidation2 = document.getElementById('password-validation-2');
        const uppercaseRegex = /[A-Z]/;
        const lowercaseRegex = /[a-z]/;
        const numberRegex = /[0-9]/;
        const symbolRegex = /[$&+,:;=?@#|'<>.^*()%!-]/;

        // Check password requirements
        if (!uppercaseRegex.test(password1)) {
            passwordValidation1.innerHTML = '<span class="Puppercase">Password must have at least 1 uppercase</span>';
            return false;
        }
        if (!lowercaseRegex.test(password1)) {
            passwordValidation1.innerHTML = '<span class="Plowercase">Password must have at least 1 lowercase</span>';
            return false;
        }
        if (!numberRegex.test(password1)) {
            passwordValidation1.innerHTML = '<span class="Pnumber">Password must have at least 1 number</span>';
            return false;
        }
        if (!symbolRegex.test(password1)) {
            passwordValidation1.innerHTML = '<span class="Psymbol">Password must have at least 1 symbol</span>';
            return false;
        }
        if (password1.length < 8) {
            passwordValidation1.innerHTML = '<span class="Plength">Password length must be at least 8 characters</span>';
            return false;
        }
        if (password1.length > 20) {
            passwordValidation1.innerHTML = '<span class="Plength">Password length must be minimum of 20 characters</span>';
            return false;
        }

        passwordValidation1.innerHTML = '';

        // Check if passwords match
        if (password1 !== password2) {
            passwordValidation2.innerHTML = '<span class="Pmatch">Passwords do not match</span>';
            return false;
        }

        passwordValidation2.innerHTML = '';
        return true;
    }

    function togglePasswordVisibility() {
        var x = document.getElementById("password1");
        var y = document.getElementById("password");
        if (x.type === "password") {
            x.type = "text";
        } else {
            x.type = "password";
        }
    }


    function togglePasswordVisibility1() {
        var passwordInput = document.getElementById("password");
        var eyeIcon = document.getElementById("toggle-password-icon");

        if (passwordInput.type === "password") {
            passwordInput.type = "text";
            eyeIcon.className = "fas fa-eye-slash"; // Change the eye icon to slashed eye
        } else {
            passwordInput.type = "password";
            eyeIcon.className = "fas fa-eye"; // Change the eye icon back to normal eye
        }
    }
</script>

    <script src="../page/script.js"></script>
</body>
</html>